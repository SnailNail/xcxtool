"""Library of memory addresses

Addresses are in WiiU virtual memory, and are correct for the 1.01E version
of the game
"""
from typing import NamedTuple


class Address(NamedTuple):
    address: int
    size: int
    struct: str


class Offset(NamedTuple):
    offset: int
    size: int
    struct: str


PLAYER = 0x1C38E5C8
characters = {
    "Player": Address(0x1C38E5C8, 0x057c, "1404s"),
    "Nagi": Address(0x1C38EB44, 0x057c, "1404s"),
    "L": Address(0x1C38F0C0, 0x057c, "1404s"),
    "Lao": Address(0x1C38F63C, 0x057c, "1404s"),
    "H.B.": Address(0x1C38FBB8, 0x057c, "1404s"),
    "Gwin": Address(0x1C390134, 0x057c, "1404s"),
    "Frye": Address(0x1C3906B0, 0x057c, "1404s"),
    "Doug": Address(0x1C390C2C, 0x057c, "1404s"),
    "Yelv": Address(0x1C3911A8, 0x057c, "1404s"),
    "Boze": Address(0x1C391724, 0x057c, "1404s"),
    "Phog": Address(0x1C391CA0, 0x057c, "1404s"),
    "Elma": Address(0x1C39221C, 0x057c, "1404s"),
    "Lin": Address(0x1C392798, 0x057c, "1404s"),
    "Celica": Address(0x1C392D14, 0x057c, "1404s"),
    "Irina": Address(0x1C393290, 0x057c, "1404s"),
    "Murderess": Address(0x1C39380C, 0x057c, "1404s"),
    "Alexa": Address(0x1C393D88, 0x057c, "1404s"),
    "Hope": Address(0x1C394304, 0x057c, "1404s"),
    "Mia": Address(0x1C394880, 0x057c, "1404s"),
}

# Character properties, relative to the character address
character_property_offsets = {
    "name": Offset(0x0000, 64, "64s"),
    "name_length": Offset(0x0040, 4, ">I"),
    # Appearance options - see struct below for details
    "appearance": Offset(0x0044, 52, "52s"),
    "_unknown_0x0078": Offset(0x0078, 2, ">H"),
    "level": Offset(0x007a, 1, "B"),
    "_padding_0x007b": Offset(0x007b, 1, "x"),
    "experience": Offset(0x007c, 4, ">I"),
    # Equipped gear - see struct below for details
    "equipped_gear": Offset(0x0080, 168, "168s"),
    "class": Offset(0x0128, 1, "B"),
    "_padding_0x0129": Offset(0x0129, 1, "x"),
    "class_level": Offset(0x012a, 1, "B"),
    "_padding_0x12b": Offset(0x12b, 1, "x"),
    "class_exp": Offset(0x012c, 2, ">H"),
    # Arts values correspond to slots 4, 3, 2, 1, 8, 7, 6, 5
    "assigned_arts": Offset(0x012e, 16, ">8H"),
    "assigned_skills": Offset(0x013e, 10, ">5H"),
    "custom_soul_voice_prompts": Offset(0x0148, 8, ">4H"),
    "soul_voices": Offset(0x150, 32, ">16H"),
    "_unknown_0x0170": Offset(0x170, 516, "516s"),
    "bp": Offset(0x0374, 4, ">I"),
    "_padding_0x0378": Offset(0x0378, 1, "x"),
    # Ranks for arts & skills, values are 0 (locked) to 5 (MAX)
    "art_levels": Offset(0x0379, 157, "157s"),
    "_padding_0x0416": Offset(0x0416, 99, "99x"),  # padding to 256 bytes for all arts
    "skill_levels": Offset(0x0479, 94, "94s"),
    "_padding_0x0d7": Offset(0x04d7, 161, "161x"),  # padding to 256 bytes for all skills
    "affinity_points": Offset(0x0578, 2, ">H"),
    "affinity": Offset(0x057a, 1, "B"),
    "final_byte": Offset(0x057b, 1, "B"),
}

appearance_offsets = {
    "face": Offset(0x00, 2, ">H"),
    "hair_style": Offset(0x02, 2, ">H"),
    "hair_addon": Offset(0x04, 2, ">H"),
    "moles": Offset(0x06, 1, "B"),
    "freckles": Offset(0x07, 1, "B"),
    "cheeks": Offset(0x08, 1, "B"),
    "scars": Offset(0x09, 1, "B"),
    "face_paint": Offset(0x0a, 2, ">H"),
    "eye_style": Offset(0x0c, 2, ">H"),
    "gender": Offset(0x0e, 4, ">I"),
    "voice": Offset(0x12, 2, ">H"),
    "skin_tone": Offset(0x14, 2, ">H"),
    "lips": Offset(0x16, 2, ">H"),
    "eyeshadow": Offset(0x18, 2, ">H"),
    "eye_color 1": Offset(0x1a, 2, ">H"),
    "eye_color 2": Offset(0x1c, 2, ">H"),
    "hair_color 1": Offset(0x1e, 2, ">H"),
    "hair_color 2": Offset(0x20, 2, ">H"),
    "_padding_0x22": Offset(0x22, 2, "2x"),
    "height": Offset(0x24, 4, ">f"),
    "chest_depth": Offset(0x28, 4, ">f"),
    "chest_height": Offset(0x2c, 4, ">f"),
    "chest_width": Offset(0x30, 4, ">f"),
}

equipped_gear_offsets = {
    "weapon_ranged": Offset(0x00, 14, "14s"),
    "weapon_melee": Offset(0x0e, 14, "14s"),
    "primary_torso": Offset(0x1c, 14, "14s"),
    "primary_head": Offset(0x2a, 14, "14s"),
    "primary_arm_r": Offset(0x38, 14, "14s"),
    "primary_arm_l": Offset(0x46, 14, "14s"),
    "primary_legs": Offset(0x54, 14, "14s"),
    "fashion_torso": Offset(0x62, 14, "14s"),
    "fashion_head": Offset(0x70, 14, "14s"),
    "fashion_arm_r": Offset(0x7e, 14, "14s"),
    "fashion_arm_l": Offset(0x8c, 14, "14s"),
    "fashion_legs": Offset(0x9a, 14, "14s"),
}

art_levels_offsets = {
    "ARTS_ASSAULT_AUTO_Na1": Offset(0x00, 1, "B"),
    "Decoy Round": Offset(0x01, 1, "B"),
    "Furious Blast": Offset(0x02, 1, "B"),
    "Burst Grenade": Offset(0x03, 1, "B"),
    "Flash Grenade": Offset(0x04, 1, "B"),
    "Assault Breaker": Offset(0x05, 1, "B"),
    "Medic Free": Offset(0x06, 1, "B"),
    "Takedown Shot": Offset(0x07, 1, "B"),
    "Power Dive": Offset(0x08, 1, "B"),
    "Last Stand": Offset(0x09, 1, "B"),
    "Gunforce": Offset(0x0a, 1, "B"),
    "Flame Grenade": Offset(0x0b, 1, "B"),
    "Assault Hammer": Offset(0x0c, 1, "B"),
    "Infuriate": Offset(0x0d, 1, "B"),
    "ARTS_ASSAULT_ARTS_14": Offset(0x0e, 1, "B"),
    "ARTS_SNIPER_AUTO_Nam": Offset(0x0f, 1, "B"),
    "First Down": Offset(0x10, 1, "B"),
    "Shrapnel": Offset(0x11, 1, "B"),
    "Eagle Eye": Offset(0x12, 1, "B"),
    "Sidewinder": Offset(0x13, 1, "B"),
    "Intercept": Offset(0x14, 1, "B"),
    "Hawkeye": Offset(0x15, 1, "B"),
    "Ghost Sniper": Offset(0x16, 1, "B"),
    "ARTS_DOUBLEHAND_AUTO": Offset(0x17, 1, "B"),
    "Sliding Slinger": Offset(0x18, 1, "B"),
    "Early Bird": Offset(0x19, 1, "B"),
    "Violent Streak": Offset(0x1a, 1, "B"),
    "Primer": Offset(0x1b, 1, "B"),
    "Executioner": Offset(0x1c, 1, "B"),
    "Combat Limbo": Offset(0x1d, 1, "B"),
    "Ghostwalker": Offset(0x1e, 1, "B"),
    "ARTS_GATLING_AUTO_Na": Offset(0x17, 1, "B"),
    "Bullet Storm": Offset(0x20, 1, "B"),
    "Hellfire": Offset(0x21, 1, "B"),
    "Thermal Payload": Offset(0x22, 1, "B"),
    "Missile Volley": Offset(0x23, 1, "B"),
    "Enhanced Stand": Offset(0x24, 1, "B"),
    "Cool Off": Offset(0x25, 1, "B"),
    "ARTS_BEAMCANNON_AUTO": Offset(0x26, 1, "B"),
    "Beam Barrage": Offset(0x27, 1, "B"),
    "Subterfuge": Offset(0x28, 1, "B"),
    "Myopic Screen": Offset(0x29, 1, "B"),
    "Ether Blast": Offset(0x2a, 1, "B"),
    "Gravity Blast": Offset(0x2b, 1, "B"),
    "Gravity Cloak": Offset(0x2c, 1, "B"),
    "Pathogen Blast": Offset(0x2d, 1, "B"),
    "ARTS_PSYCHO_AUTO_Nam": Offset(0x2e, 1, "B"),
    "Jetstream": Offset(0x2f, 1, "B"),
    "Stellar Ray": Offset(0x30, 1, "B"),
    "Lightning Cloak": Offset(0x31, 1, "B"),
    "Starlight Kick": Offset(0x32, 1, "B"),
    "Astral Protection": Offset(0x33, 1, "B"),
    "Shooting Star": Offset(0x34, 1, "B"),
    "ARTS_SWORD_AUTO_Name": Offset(0x35, 1, "B"),
    "Rising Blade": Offset(0x36, 1, "B"),
    "Defensive Stance": Offset(0x37, 1, "B"),
    "Offensive Stance": Offset(0x38, 1, "B"),
    "Magnum Edge": Offset(0x39, 1, "B"),
    "Tornado Blade": Offset(0x3a, 1, "B"),
    "Burning Slash": Offset(0x3b, 1, "B"),
    "Incendiary Edge": Offset(0x3c, 1, "B"),
    "Samurai Soul": Offset(0x3d, 1, "B"),
    "ARTS_JAVELIN_AUTO_Na": Offset(0x3e, 1, "B"),
    "Arcing Horn": Offset(0x3f, 1, "B"),
    "Hair Trigger": Offset(0x40, 1, "B"),
    "Spiral Horn": Offset(0x41, 1, "B"),
    "Overwhelm": Offset(0x42, 1, "B"),
    "Speed Demon": Offset(0x43, 1, "B"),
    "Raijin": Offset(0x44, 1, "B"),
    "Trident Buster": Offset(0x45, 1, "B"),
    "ARTS_DOUBLEBLADE_AUT": Offset(0x46, 1, "B"),
    "Back Slash": Offset(0x47, 1, "B"),
    "Killing Machine": Offset(0x48, 1, "B"),
    "Side Slash": Offset(0x49, 1, "B"),
    "Stream Edge": Offset(0x4a, 1, "B"),
    "Shadowrunner": Offset(0x4b, 1, "B"),
    "Thirsty Edge": Offset(0x4c, 1, "B"),
    "Blood Sacrifice": Offset(0x4d, 1, "B"),
    "Upper Hand": Offset(0x4e, 1, "B"),
    "Hundred Shells": Offset(0x4f, 1, "B"),
    "Electric Surge": Offset(0x50, 1, "B"),
    "ARTS_HUGESHIELD_AUTO": Offset(0x51, 1, "B"),
    "Wild Down": Offset(0x52, 1, "B"),
    "Flame Cloak": Offset(0x53, 1, "B"),
    "Trash Talk": Offset(0x54, 1, "B"),
    "Iron Prison": Offset(0x55, 1, "B"),
    "Supershield": Offset(0x56, 1, "B"),
    "Wild Smash": Offset(0x57, 1, "B"),
    "Reality Rift": Offset(0x58, 1, "B"),
    "Bombardier": Offset(0x59, 1, "B"),
    "Shield Wall": Offset(0x5a, 1, "B"),
    "ARTS_KNIFE_AUTO_Name": Offset(0x5b, 1, "B"),
    "Screamer": Offset(0x5c, 1, "B"),
    "Absorber Skin": Offset(0x5d, 1, "B"),
    "Servant Sacrifice": Offset(0x5e, 1, "B"),
    "Full Specs": Offset(0x5f, 1, "B"),
    "Repair": Offset(0x60, 1, "B"),
    "Energy Source": Offset(0x61, 1, "B"),
    "Brainjack": Offset(0x62, 1, "B"),
    "Dispel": Offset(0x63, 1, "B"),
    "Black Butterfly": Offset(0x64, 1, "B"),
    "Recuperate": Offset(0x65, 1, "B"),
    "Chrome Armor": Offset(0x66, 1, "B"),
    "Slit Edge": Offset(0x67, 1, "B"),
    "ARTS_KNIFE_ARTS_13_N": Offset(0x68, 1, "B"),
    "ARTS_BEAMSABER_AUTO_": Offset(0x69, 1, "B"),
    "Geolibrium": Offset(0x6a, 1, "B"),
    "Astrolibrium": Offset(0x6b, 1, "B"),
    "Starfall Blade": Offset(0x6c, 1, "B"),
    "Starfall Rondo": Offset(0x6d, 1, "B"),
    "Astral Purge": Offset(0x6e, 1, "B"),
    "Astral Horizon": Offset(0x6f, 1, "B"),
    "Galactic Cataclysm": Offset(0x70, 1, "B"),
    "Astral Heal": Offset(0x71, 1, "B"),
    "Novalibrium": Offset(0x72, 1, "B"),
    "Starfall Blossom": Offset(0x73, 1, "B"),
    "ARTS_ASSAULT_AUTO_Na": Offset(0x74, 1, "B"),
    "Boost Barrel": Offset(0x75, 1, "B"),
    "Sniper Barrel": Offset(0x76, 1, "B"),
    "Missile Barrel": Offset(0x77, 1, "B"),
    "Cannon Barrel": Offset(0x78, 1, "B"),
    "Quick Cannon": Offset(0x79, 1, "B"),
    "Grenade Blitz": Offset(0x7a, 1, "B"),
    "Overclock": Offset(0x7b, 1, "B"),
    "Afterburner": Offset(0x7c, 1, "B"),
    "Slayonet": Offset(0x7d, 1, "B"),
    "Ghost Factory": Offset(0x7e, 1, "B"),
    "Zero Zero": Offset(0x7f, 1, "B"),
    "Sky High": Offset(0x80, 1, "B"),
    "Fire Carnival": Offset(0x81, 1, "B"),
    "Bullet Twister": Offset(0x82, 1, "B"),
    "Titan Recharge": Offset(0x83, 1, "B"),
    "Master Gunner": Offset(0x84, 1, "B"),
    "Clarity Ray": Offset(0x85, 1, "B"),
    "Beam Bomber": Offset(0x86, 1, "B"),
    "Dual Dynamo": Offset(0x87, 1, "B"),
    "Gravity Lunge": Offset(0x88, 1, "B"),
    "Tacit Censure": Offset(0x89, 1, "B"),
    "Ultraslash": Offset(0x8a, 1, "B"),
    "Blossom Dance": Offset(0x8b, 1, "B"),
    "True Stream Edge": Offset(0x8c, 1, "B"),
    "Balance Breaker": Offset(0x8d, 1, "B"),
    "Vortex": Offset(0x8e, 1, "B"),
    "Maximum Voltage": Offset(0x8f, 1, "B"),
    "Shadowstrike": Offset(0x90, 1, "B"),
    "Crisis Zone": Offset(0x91, 1, "B"),
    "Seventh Edge": Offset(0x92, 1, "B"),
    "Drum Roll": Offset(0x93, 1, "B"),
    "Mindstorm": Offset(0x94, 1, "B"),
    "Atomic Hit": Offset(0x95, 1, "B"),
    "Flamehand": Offset(0x96, 1, "B"),
    "Smooth Recovery": Offset(0x97, 1, "B"),
    "Black Bane": Offset(0x98, 1, "B"),
    "Secondary Speed": Offset(0x99, 1, "B"),
    "Starlight Duster": Offset(0x9a, 1, "B"),
    "Essence Exchange": Offset(0x9b, 1, "B"),
    "Phenomenon": Offset(0x9c, 1, "B"),
}
skill_levels_offsets = {
    "Steel Flesh": Offset(0x00, 1, "B"),
    "Unwavering Courage": Offset(0x01, 1, "B"),
    "Flame Trigger": Offset(0x02, 1, "B"),
    "Mighty Muscle": Offset(0x03, 1, "B"),
    "Combat Presence": Offset(0x04, 1, "B"),
    "Dismantler": Offset(0x05, 1, "B"),
    "Agile Gunslinger": Offset(0x06, 1, "B"),
    "Steady Hand": Offset(0x07, 1, "B"),
    "Boosted Bullets": Offset(0x08, 1, "B"),
    "Background Noise": Offset(0x09, 1, "B"),
    "Combo Gunner": Offset(0x0a, 1, "B"),
    "Third Eye": Offset(0x0b, 1, "B"),
    "Master Edge": Offset(0x0c, 1, "B"),
    "Aura Burst": Offset(0x0d, 1, "B"),
    "Inner Search": Offset(0x0e, 1, "B"),
    "Beam Boost": Offset(0x0f, 1, "B"),
    "Beam Guard": Offset(0x10, 1, "B"),
    "Buff Heal": Offset(0x11, 1, "B"),
    "Healing Touch": Offset(0x12, 1, "B"),
    "High Tension": Offset(0x13, 1, "B"),
    "CQC Master": Offset(0x14, 1, "B"),
    "Auto Melee Boost": Offset(0x15, 1, "B"),
    "Iron Knuckle": Offset(0x16, 1, "B"),
    "Healing Aura": Offset(0x17, 1, "B"),
    "Weapon Guard": Offset(0x18, 1, "B"),
    "Blazing Auto": Offset(0x19, 1, "B"),
    "Theroid Slayer": Offset(0x1a, 1, "B"),
    "Yamato Spirit": Offset(0x1b, 1, "B"),
    "Thermal Shield": Offset(0x1c, 1, "B"),
    "Topple Topper": Offset(0x1d, 1, "B"),
    "Shield Screen": Offset(0x1e, 1, "B"),
    "Rising Renewal": Offset(0x1f, 1, "B"),
    "Long Topple": Offset(0x20, 1, "B"),
    "Trauma Tension": Offset(0x21, 1, "B"),
    "Dirty Fighter": Offset(0x22, 1, "B"),
    "Stand Strong": Offset(0x23, 1, "B"),
    "Deep Fang": Offset(0x24, 1, "B"),
    "Mortal Enemy": Offset(0x25, 1, "B"),
    "Trigger Happy": Offset(0x26, 1, "B"),
    "Lifeline": Offset(0x27, 1, "B"),
    "Mindscape": Offset(0x28, 1, "B"),
    "Hellhound": Offset(0x29, 1, "B"),
    "Killshot": Offset(0x2a, 1, "B"),
    "Electric Guard": Offset(0x2b, 1, "B"),
    "Electric Boost": Offset(0x2c, 1, "B"),
    "Knock 'n' Shock": Offset(0x2d, 1, "B"),
    "Fleet Feet": Offset(0x2e, 1, "B"),
    "Piscinoid Slayer": Offset(0x2f, 1, "B"),
    "Beauty Sleep": Offset(0x30, 1, "B"),
    "Brain Wall": Offset(0x31, 1, "B"),
    "Gentle Approach": Offset(0x32, 1, "B"),
    "King's Decree": Offset(0x33, 1, "B"),
    "Extra Armor": Offset(0x34, 1, "B"),
    "Feather Touch": Offset(0x35, 1, "B"),
    "Unpleasant Dream": Offset(0x36, 1, "B"),
    "Core Crusher": Offset(0x37, 1, "B"),
    "Ether Boost": Offset(0x38, 1, "B"),
    "Mechanoid Slayer": Offset(0x39, 1, "B"),
    "Knight's Soul": Offset(0x3a, 1, "B"),
    "Aura Assault": Offset(0x3b, 1, "B"),
    "Buff Extender": Offset(0x3c, 1, "B"),
    "Supreme Sword": Offset(0x3d, 1, "B"),
    "Conflagrant Edge": Offset(0x3e, 1, "B"),
    "Aggro Boost": Offset(0x3f, 1, "B"),
    "Fortified Flesh": Offset(0x40, 1, "B"),
    "Grand Procession": Offset(0x41, 1, "B"),
    "Machine Gunner": Offset(0x42, 1, "B"),
    "Heatseeker": Offset(0x43, 1, "B"),
    "Double Spike": Offset(0x44, 1, "B"),
    "Double Reflect": Offset(0x45, 1, "B"),
    "Night Vision": Offset(0x46, 1, "B"),
    "Zero Lapse": Offset(0x47, 1, "B"),
    "Red Zone": Offset(0x48, 1, "B"),
    "Crisis Catalyst": Offset(0x49, 1, "B"),
    "Blood Carnival": Offset(0x4a, 1, "B"),
    "Phantom Counter": Offset(0x4b, 1, "B"),
    "Long Shot": Offset(0x4d, 1, "B"),
    "Unstoppable": Offset(0x4e, 1, "B"),
    "Quick Reload": Offset(0x4f, 1, "B"),
    "Conductive Strike": Offset(0x50, 1, "B"),
    "Electric Flesh": Offset(0x51, 1, "B"),
    "TP Overdrive": Offset(0x52, 1, "B"),
    "Ether Guard": Offset(0x53, 1, "B"),
    "Gravity Boost": Offset(0x54, 1, "B"),
    "Well-Weathered": Offset(0x55, 1, "B"),
    "Appendage Erosion": Offset(0x56, 1, "B"),
    "Resistant Flesh": Offset(0x57, 1, "B"),
    "Tactical Analyst": Offset(0x58, 1, "B"),
    "King's Boon": Offset(0x59, 1, "B"),
    "Secondary Accelerator": Offset(0x5a, 1, "B"),
    "Gravity Guard": Offset(0x5a, 1, "B"),
    "Fast Forward": Offset(0x5b, 1, "B"),
    "Stellar Entry": Offset(0x5c, 1, "B"),
    "Synchrony": Offset(0x5d, 1, "B"),
}


# Display buffers above this value, according to
# https://gbatemp.net/threads/xcxgecko-xenoblade-chronicles-x-trainer-gui-using-pygecko.406442/post-5968675
buffers = 0x1C400000

# Only updates when menu is open (timer is onscreen)
timer = Address(0x1FB146E8, 12, ">III"),
